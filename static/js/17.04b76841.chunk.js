(this["webpackJsonpretail-system"]=this["webpackJsonpretail-system"]||[]).push([[17],{122:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n,a,o,s,i=r(51),c=r.n(i),u=r(52),l=r(70),E=r(54),O=r(55),p=r(71),d=(r(72),r(0)),_=r.n(d),T=r(58),N=r(66),f=r(77),S=new(function(){function e(){Object(E.a)(this,e),this.accountPrefix=f.a.PREFIX}return Object(O.a)(e,[{key:"login",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat(this.accountPrefix,"/login"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat(this.accountPrefix,"/check-token"),{token:t});case 2:return n=e.sent,e.abrupt("return",null===(r=n.data)||void 0===r?void 0:r.result);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateResetToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat(this.accountPrefix,"/check-reset-token"),{token:t});case 2:return n=e.sent,e.abrupt("return",null===(r=n.data)||void 0===r?void 0:r.result);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateEmailToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(this.accountPrefix,"/verify-email/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),m=r(64),A=(n=function(){function e(){Object(E.a)(this,e),Object(l.a)(this,"loggedUser",a,this),Object(l.a)(this,"tmpUser",o,this),Object(l.a)(this,"loginFormValue",s,this)}return Object(O.a)(e,[{key:"setLoginFormValue",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loginFormValue=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLoggedUser",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loggedUser=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearTmpUser",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tmpUser=null;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r,n){var a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.login(this.loginFormValue);case 2:(a=e.sent)&&(this._setCurrentInfo(a),o=this.loggedUser.EmailVerified?r:n,this._redirectAfterLogin(t,o));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"validateToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateToken(t);case 2:(n=e.sent)&&this._saveUser(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"validateResetToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateResetToken(t);case 2:(n=e.sent)&&(this.tmpUser=n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(u.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(m.a)("token"),this.loggedUser=null,t.push(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_setCurrentInfo",value:function(e){this.loggedUser=e,Object(m.b)("token",e.token)}},{key:"_saveUser",value:function(e){this.loggedUser=e}},{key:"_redirectAfterLogin",value:function(e,t){return console.log(t),e.push(t)}},{key:"validateEmailToken",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateEmailToken(t);case 2:return(r=e.sent)&&(this.tmpUser=r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),a=Object(p.a)(n.prototype,"loggedUser",[T.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=Object(p.a)(n.prototype,"tmpUser",[T.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=Object(p.a)(n.prototype,"loginFormValue",[T.p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{email:"",password:""}}}),Object(p.a)(n.prototype,"setLoginFormValue",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"setLoginFormValue"),n.prototype),Object(p.a)(n.prototype,"setLoggedUser",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"setLoggedUser"),n.prototype),Object(p.a)(n.prototype,"clearTmpUser",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"clearTmpUser"),n.prototype),Object(p.a)(n.prototype,"login",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"login"),n.prototype),Object(p.a)(n.prototype,"validateToken",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"validateToken"),n.prototype),Object(p.a)(n.prototype,"validateResetToken",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"validateResetToken"),n.prototype),Object(p.a)(n.prototype,"logout",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"logout"),n.prototype),Object(p.a)(n.prototype,"validateEmailToken",[T.f],Object.getOwnPropertyDescriptor(n.prototype,"validateEmailToken"),n.prototype),n),C=_.a.createContext(new A)},123:function(e,t,r){"use strict";r(0);var n=r(56),a=r.p+"static/media/logo.a19d979f.svg",o=r(1);t.a=Object(n.c)((function(e){var t=e.style,r=e.className,n=e.children,s=e.title;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"wrapper one-page ".concat(r||""),style:t,children:Object(o.jsxs)("div",{className:"main",children:[Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("a",{href:"/",title:"Retail System",className:"logo",style:{display:"none"},children:Object(o.jsx)("img",{alt:"Retail System Logo",src:a})}),Object(o.jsx)("div",{className:"header-title",children:s})]}),n]})})})}))},469:function(e,t,r){"use strict";r.r(t);var n=r(62),a=r(51),o=r.n(a),s=r(52),i=r(0),c=r.n(i),u=r(78),l=r(3),E=r(123),O=r(8),p=r(56),d=r(463),_=r(230),T=r(423),N=r(455),f=r(207),S=r(208),m=r(57),A=r(1),C=Object(p.c)((function(e){var t=e.style,r=e.className,n=e.children,a=e.handleLogin,o=e.handleForgotPassword,s=e.handleSignUp,i=void 0!==s&&s,c=e.formTitle,u=void 0===c?"":c,l=e.accountEmail,E=e.initialValues,O=void 0===E?{email:"",password:""}:E,p=m.a.VALIDATE_EMAIL,C=m.a.VALIDATE_REQUIRED,R=m.a.ACCOUNT_LOGIN_WELCOME,h=m.a.ACCOUNT_EMAIL,I=m.a.PLACEHOLDER_EMAIL,j=m.a.ACCOUNT_PASSWORD,b=m.a.PLACEHOLDER_PASSWORD,v=m.a.ACCOUNT_LINK_FORGOTPASSWORD,D=m.a.BUTTONS_LOGIN,U=m.a.BUTTONS_SIGNUP,g=S.a({email:S.c().required(C).email(p),password:S.c().required(C)});return O.email=null!==l&&void 0!==l?l:"",Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(f.a,{validationSchema:g,onSubmit:function(e){a(e)},initialValues:O,children:function(e){var a=e.handleSubmit,s=e.handleChange,c=(e.handleBlur,e.values),l=e.errors;return Object(A.jsxs)(d.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),a()},className:"form form-login ".concat(r||""),style:t,children:[Object(A.jsx)("h2",{className:"form-title",children:u||R}),n,Object(A.jsx)(d.a.Row,{children:Object(A.jsxs)(d.a.Group,{as:_.a,md:"12",controlId:"email",className:"form-group-email",children:[Object(A.jsx)("i",{className:"ico ico-account-email"}),Object(A.jsxs)(d.a.Label,{className:"form-label-required",children:[h," ",Object(A.jsx)("span",{children:"*"})]}),Object(A.jsx)(d.a.Control,{type:"text",placeholder:I,name:"email",value:c.email,onChange:s,isInvalid:!!l.email}),Object(A.jsx)(d.a.Control.Feedback,{type:"invalid",children:l.email})]})}),Object(A.jsx)(d.a.Row,{children:Object(A.jsxs)(d.a.Group,{as:_.a,md:"12",controlId:"password",className:"form-group-password",children:[Object(A.jsx)("i",{className:"ico ico-password"}),Object(A.jsxs)(d.a.Label,{className:"form-label-required",children:[j," ",Object(A.jsx)("span",{children:"*"})]}),Object(A.jsx)(d.a.Control,{type:"password",placeholder:b,value:c.password,onChange:s,isInvalid:!!l.password}),Object(A.jsx)(d.a.Control.Feedback,{type:"invalid",children:l.password})]})}),Object(A.jsx)(d.a.Row,{children:Object(A.jsx)(d.a.Group,{as:_.a,md:"12",controlId:"formBasicCheckbox",children:Object(A.jsx)(T.a,{variant:"link",className:"action-link",onClick:o,children:v})})}),Object(A.jsxs)(N.a,{className:"form-actions",children:[Object(A.jsxs)(T.a,{variant:"primary",type:"submit",children:[Object(A.jsx)("span",{children:D}),Object(A.jsx)("i",{className:"ico ico-o-next"})]}),i&&Object(A.jsxs)(T.a,{onClick:i,variant:"outline-primary",children:[Object(A.jsx)("span",{children:U}),Object(A.jsx)("i",{className:"ico ico-plus"})]})]})]})}})})})),R=Object(p.c)((function(e){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(C,Object(O.a)({},e))})})),h=r(77),I=r(122),j=r(456);t.default=Object(u.a)((function(){var e,t,r=Object(l.f)(),a=c.a.useContext(I.a),i=function(){var e=Object(s.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={email:t.email,password:t.password},a.setLoginFormValue(n),e.next=4,a.login(r,h.b.ACCOUNT_MANAGE,h.b.NOT_VERIFIED);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=c.a.useState(""),O=Object(n.a)(u,2),p=O[0],d=O[1],_=c.a.useState({email:null!==(e=null===a||void 0===a||null===(t=a.tmpUser)||void 0===t?void 0:t.email)&&void 0!==e?e:"",password:""}),T=Object(n.a)(_,2),N=T[0],f=T[1],S=c.a.useState(!1),m=Object(n.a)(S,2),C=m[0],b=m[1],v=function(){return C?Object(A.jsxs)(j.a,{variant:"danger",onClose:function(){return b(!1)},dismissible:!0,children:[Object(A.jsx)(j.a.Heading,{children:"Oh snap! You got an error!"}),Object(A.jsx)("p",{children:"Change this and that and try again. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Cras mattis consectetur purus sit amet fermentum."})]}):Object(A.jsx)(A.Fragment,{})};return c.a.useEffect((function(){var e,t;a.tmpUser&&(d(a.tmpUser.email),f({email:null!==(e=null===a||void 0===a||null===(t=a.tmpUser)||void 0===t?void 0:t.email)&&void 0!==e?e:"",password:""}),a.clearTmpUser())}),[a,a.tmpUser]),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(E.a,{title:"Login",children:[Object(A.jsx)(R,{handleLogin:i,handleForgotPassword:function(){r.push(h.b.FORGOT_PASSWORD)},handleSignUp:function(){r.push(h.b.CREATE)},userEmail:p,initialValues:N}),Object(A.jsx)(v,{})]})})}))},57:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.LOGIN_FAIL="Login Fail. Wrong email or password. Please try again",e.VALIDATE_EMAIL="Please enter a valid email address (Ex: johndoe@domain.com)",e.VALIDATE_REQUIRED="This is a required field",e.VALIDATE_PHONE="Phone number is not valid",e.VALIDATE_CONFIRM_PASSWORD="Please enter the same value",e.ADMIN_NEW_ACCOUNT="New Account",e.ADMIN_EDIT_ACCOUNT="Edit Account",e.ADMIN_MANAGE_ACCOUNT="Manage Accounts",e.ADMIN_MANAGE_PRODUCT="Manage Products",e.ACCOUNT_CREATE_TITLE="Sign up",e.ACCOUNT_CONFIRM_PASSWORD="Confirm Password",e.ACCOUNT_PHONE_REQUIRED="Phone number",e.PLACEHOLDER_PHONE="Ex: 09xxxxxxxx",e.ACCOUNT_FNAME="First name",e.ACCOUNT_LNAME="Last name",e.ACCOUNT_PHONE="Phone number",e.ACCOUNT_ROLE_LABEL="Account type",e.MODAL_CONFIRM="Confirmation",e.BUTTONS_OK="Ok",e.BUTTONS_CANCEL="Cancel",e.BUTTONS_CREATE="Create",e.BUTTONS_DELETE="Delete",e.BUTTONS_UPDATE="Update",e.BUTTONS_LOGIN="Login",e.BUTTONS_SIGNUP="Signup",e.BUTTONS_ADD_NEW="New",e.BUTTONS_RESTORE="Restore",e.PLACEHOLDER_EMAIL="Please enter your email here",e.PLACEHOLDER_PASSWORD="Please enter your pass word here",e.PLACEHOLDER_CONFIRM_PASSWORD="Confirm password",e.ACCOUNT_LOGIN_WELCOME="Welcome",e.ACCOUNT_EMAIL="Email",e.ACCOUNT_PASSWORD="Password",e.ACCOUNT_LINK_FORGOTPASSWORD="Forgot password",e.PAGING_FIRST="First",e.PAGING_LAST="Last",e.PAGING_NEXT="Next",e.PAGING_PREV="Prev",e.PAGING_AMOUNT="record(s) found",e.PAGING_PER_PAGE="per page",e.MESSAGES_DELETE_SUCCESS="Deleted successfully",e.MESSAGES_VERIFY_SUCCESS="Verified successfully",e.MESSAGES_UPDATE_SUCCESS="Updated successfully",e.MESSAGES_CREATED_SUCCESS="Created successfully",e.ADMIN_MENU_LOG_OUT="Log out"}(n||(n={}))},64:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n=function(e,t){localStorage.removeItem(e),localStorage.setItem(e,t)},a=function(e){localStorage.removeItem(e)}},66:function(e,t,r){"use strict";var n,a,o=r(94),s=r.n(o),i=r(12),c=r(57);!function(e){e.PRIMARY="primary",e.SECONDARY="secondary",e.SUCCESS="success",e.DANGER="danger",e.WARNING="warning",e.INFO="info",e.LIGHT="light",e.DARK="dark"}(n||(n={})),function(e){e.SELECTED_ITEMS="SELECTED_ITEMS",e.FORGOT_SUCCESS="FORGOT_SUCCESS",e.CONFIRM_DELETE="CONFIRM_DELETE",e.CONFIRM_CANCEL="CONFIRM_CANCEL",e.DELETE_SUCCESS="DELETE_SUCCESS",e.UPDATE_SUCCESS="UPDATE_SUCCESS",e.CREATED_SUCCESS="CREATED_SUCCESS",e.IMAGE_SIZE="IMAGE_SIZE",e.LOGIN_FAIL="LOGIN_FAIL",e.CREATE_ERROR="CREATE_ERROR",e.EMAIL_EXIST="EMAIL_EXIST",e.INVALID="INVALID",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR",e.SELF_DELETE="SELF_DELETE",e.SUPER_ADMIN_DELETE="SUPER_ADMIN_DELETE",e.ORDER_NOT_FOUND="ORDER_NOT_FOUND",e.PHONE_EXIST="PHONE_EXIST",e.EXISTED="EXISTED",e.CREATE_ORDER_ERROR="CREATE_ORDER_ERROR",e.NOT_ASSIGNED="NOT_ASSIGNED",e.DELETED_ACCOUNT="DELETED_ACCOUNT",e.KICKED_OUT="KICKED_OUT",e.WRONG_PHONE_NUMBER_FORMAT="WRONG_PHONE_NUMBER_FORMAT",e.PHONE_INPUT_TOO_LONG="PHONE_INPUT_TOO_LONG",e.TAKEN="TAKEN",e.TOKEN_ERROR="TOKEN_ERROR",e.ORDER_PERMISSION="ORDER_PERMISSION",e.NOT_VERIFIED="NOT_VERIFIED",e.FOLDER_NOT_EXISTED="FOLDER_NOT_EXISTED",e.EMAIL_NOT_VERIFY="EMAIL_NOT_VERIFY",e.PHONE_OTP_VERIFY="PHONE_OTP_VERIFY",e.INCORRECT_OTP="INCORRECT_OTP",e.OTP_EXPIRED="OTP_EXPIRED",e.PHONE_NOT_EXIST="PHONE_NOT_EXIST",e.PICKUP_CODE_INCORRECT="PICKUP_CODE_INCORRECT",e.ADMIN_NOT_FOUND="ADMIN_NOT_FOUND",e.EMAIL_NOT_FOUND="EMAIL_NOT_FOUND",e.DETAIL_REQUIRED="DETAIL_REQUIRED"}(a||(a={}));var u=[{key:a.DELETE_SUCCESS,label:c.a.MESSAGES_DELETE_SUCCESS},{key:a.UPDATE_SUCCESS,label:c.a.MESSAGES_UPDATE_SUCCESS},{key:a.CREATED_SUCCESS,label:c.a.MESSAGES_CREATED_SUCCESS},{key:a.LOGIN_FAIL,label:c.a.LOGIN_FAIL}],l=r(67),E=r(64),O=s.a.create({baseURL:"http://localhost:4000/api",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"}});O.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.common.Authorization="Bearer "+localStorage.getItem("token")),e.headers.common["Access-Control-Allow-Origin"]="*",e})),O.interceptors.response.use((function(e){return e}),(function(e){if(i.c.dismiss(),!e.response)return i.c.error("Unknown error happened! Please contact admin for support"),Object(l.a)(e);var t,r,n,a=e.response.data,o=a.detailError,s="",c="";(403===e.response.status&&(Object(E.a)("token"),window.location.pathname.includes("login")||window.location.replace("/")),o)?Array.isArray(o.message)?(s=o.message[0],c=null!==(t=null===o||void 0===o?void 0:o.errorCode)&&void 0!==t?t:""):(s=o.message,c=null!==(r=null===o||void 0===o?void 0:o.errorCode)&&void 0!==r?r:""):(s=a.message,c=null!==(n=null===a||void 0===a?void 0:a.errorCode)&&void 0!==n?n:"");if(""!==c){var O=u.find((function(e){return e.key===c}));O?i.c.error(O.label):i.c.error(s)}else i.c.error(s);return 400===e.response.status?a:Object(l.a)(e)}));t.a=O},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));r(19);var n=r(8),a=function(e){return Promise.reject(e)},o=function(e){var t=Object.keys(e).filter((function(e){return e.includes("confirm")})),r=Object(n.a)({},e);return t.map((function(e){return delete r[e]})),r}},77:function(e,t,r){"use strict";var n,a,o,s;r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o})),function(e){e.LOGIN="/account/login",e.FORGOT_PASSWORD="/account/forgotpassword",e.RESET_PASSWORD_TOKEN="/account/reset-password/:token",e.VERIFY_EMAIL="/account/verify-email/:token",e.SET_PASSWORD_TOKEN="/account/set-password/:token",e.CREATE="/account/register",e.SETUP="/account/setup",e.ACCOUNT_MANAGE="/account/manage",e.NOT_VERIFIED="/account/not-verified",e.THANKYOU="/account/thankyou/:action"}(n||(n={})),function(e){e.THANKYOU="/account/thankyou/"}(a||(a={})),function(e){e.PREFIX="/accounts"}(o||(o={})),function(e){e[e.UNVERIFIED=0]="UNVERIFIED",e[e.PENDING=1]="PENDING",e[e.VERIFIED=2]="VERIFIED"}(s||(s={}))}}]);
//# sourceMappingURL=17.04b76841.chunk.js.map